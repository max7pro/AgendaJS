<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>AgendaJS Demo</title>
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="AgendaJS.css">
	
	<script src="AgendaJS.js"></script>
</head>
<body>

	<div id="agenda-js"></div>

	<script>

		// Just to simulate a server we are using localStorage, which required to store the data
		// between page reloads.
		const api = {
			sendEvents: ( events ) => localStorage.setItem( '_agendajs-events', JSON.stringify( events ) ),
			receiveEvents: () => JSON.parse( localStorage.getItem( '_agendajs-events' ) ),
			sendFreezed: ( freezed ) => localStorage.setItem( '_agendajs-freezed', JSON.stringify( freezed ) ),
			receiveFreezed: () => JSON.parse( localStorage.getItem( '_agendajs-freezed' ) )
		}

		// So, let's ask our 'server' to send us the data stored from its 'database'
		let events = api.receiveEvents(),
			freezed = api.receiveFreezed()


		let agenda = new AgendaJS('#agenda-js', {
			data: {
				events: events,
				freezed: freezed
			}
		})

		// let agenda = new AgendaJS( '#agenda-js')
		// agenda.events = events
		// agenda.freezed = freezed
		// agenda.setEvents( events )
		// agenda.setFreezed( freezed )

		agenda.onEventCreated( event => {
			console.log( 'Event successfully created', event )

			// let events = agenda.events
			let events = agenda.getEvents()

			api.sendEvents( events )
		})

		agenda.onDayEventsObtained( ( timestamp, events ) => {
			console.log( 'Day events obtained', timestamp, events )

			// let freezed = agenda.freezed
			let freezed = agenda.getFreezed()

			api.sendFreezed( freezed )
		} )
	
	</script>
	
</body>
</html>